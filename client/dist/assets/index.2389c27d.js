(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function t(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerpolicy&&(l.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?l.credentials="include":i.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(i){if(i.ep)return;i.ep=!0;const l=t(i);fetch(i.href,l)}})();const C={},ue=(e,n)=>e===n,ae=Symbol("solid-track"),j={equals:ue};let de=le;const T=1,q=2,ee={owned:null,cleanups:null,context:null,owner:null};var p=null;let N=null,h=null,w=null,E=null,Y=0;function X(e,n){const t=h,s=p,i=e.length===0,l=i?ee:{owned:null,cleanups:null,context:null,owner:n||s},r=i?e:()=>e(()=>B(()=>H(l)));p=l,h=null;try{return P(r,!0)}finally{h=t,p=s}}function O(e,n){n=n?Object.assign({},j,n):j;const t={value:e,observers:null,observerSlots:null,comparator:n.equals||void 0},s=i=>(typeof i=="function"&&(i=i(t.value)),ne(t,i));return[te.bind(t),s]}function F(e,n,t){const s=se(e,n,!1,T);D(s)}function G(e,n,t){t=t?Object.assign({},j,t):j;const s=se(e,n,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=t.equals||void 0,D(s),te.bind(s)}function B(e){const n=h;h=null;try{return e()}finally{h=n}}function he(e){return p===null||(p.cleanups===null?p.cleanups=[e]:p.cleanups.push(e)),e}function ge(e){const n=G(e),t=G(()=>R(n()));return t.toArray=()=>{const s=t();return Array.isArray(s)?s:s!=null?[s]:[]},t}function te(){const e=N;if(this.sources&&(this.state||e))if(this.state===T||e)D(this);else{const n=w;w=null,P(()=>I(this),!1),w=n}if(h){const n=this.observers?this.observers.length:0;h.sources?(h.sources.push(this),h.sourceSlots.push(n)):(h.sources=[this],h.sourceSlots=[n]),this.observers?(this.observers.push(h),this.observerSlots.push(h.sources.length-1)):(this.observers=[h],this.observerSlots=[h.sources.length-1])}return this.value}function ne(e,n,t){let s=e.value;return(!e.comparator||!e.comparator(s,n))&&(e.value=n,e.observers&&e.observers.length&&P(()=>{for(let i=0;i<e.observers.length;i+=1){const l=e.observers[i],r=N&&N.running;r&&N.disposed.has(l),(r&&!l.tState||!r&&!l.state)&&(l.pure?w.push(l):E.push(l),l.observers&&oe(l)),r||(l.state=T)}if(w.length>1e6)throw w=[],new Error},!1)),n}function D(e){if(!e.fn)return;H(e);const n=p,t=h,s=Y;h=p=e,pe(e,e.value,s),h=t,p=n}function pe(e,n,t){let s;try{s=e.fn(n)}catch(i){e.pure&&(e.state=T),re(i)}(!e.updatedAt||e.updatedAt<=t)&&(e.updatedAt!=null&&"observers"in e?ne(e,s):e.value=s,e.updatedAt=t)}function se(e,n,t,s=T,i){const l={fn:e,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:n,owner:p,context:null,pure:t};return p===null||p!==ee&&(p.owned?p.owned.push(l):p.owned=[l]),l}function ie(e){const n=N;if(e.state===0||n)return;if(e.state===q||n)return I(e);if(e.suspense&&B(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Y);)(e.state||n)&&t.push(e);for(let s=t.length-1;s>=0;s--)if(e=t[s],e.state===T||n)D(e);else if(e.state===q||n){const i=w;w=null,P(()=>I(e,t[0]),!1),w=i}}function P(e,n){if(w)return e();let t=!1;n||(w=[]),E?t=!0:E=[],Y++;try{const s=e();return we(t),s}catch(s){w||(E=null),re(s)}}function we(e){if(w&&(le(w),w=null),e)return;const n=E;E=null,n.length&&P(()=>de(n),!1)}function le(e){for(let n=0;n<e.length;n++)ie(e[n])}function I(e,n){const t=N;e.state=0;for(let s=0;s<e.sources.length;s+=1){const i=e.sources[s];i.sources&&(i.state===T||t?i!==n&&ie(i):(i.state===q||t)&&I(i,n))}}function oe(e){const n=N;for(let t=0;t<e.observers.length;t+=1){const s=e.observers[t];(!s.state||n)&&(s.state=q,s.pure?w.push(s):E.push(s),s.observers&&oe(s))}}function H(e){let n;if(e.sources)for(;e.sources.length;){const t=e.sources.pop(),s=e.sourceSlots.pop(),i=t.observers;if(i&&i.length){const l=i.pop(),r=t.observerSlots.pop();s<i.length&&(l.sourceSlots[r]=s,i[s]=l,t.observerSlots[s]=r)}}if(e.owned){for(n=0;n<e.owned.length;n++)H(e.owned[n]);e.owned=null}if(e.cleanups){for(n=0;n<e.cleanups.length;n++)e.cleanups[n]();e.cleanups=null}e.state=0,e.context=null}function ye(e){return e instanceof Error||typeof e=="string"?e:new Error("Unknown error")}function re(e){throw e=ye(e),e}function R(e){if(typeof e=="function"&&!e.length)return R(e());if(Array.isArray(e)){const n=[];for(let t=0;t<e.length;t++){const s=R(e[t]);Array.isArray(s)?n.push.apply(n,s):n.push(s)}return n}return e}const be=Symbol("fallback");function V(e){for(let n=0;n<e.length;n++)e[n]()}function me(e,n,t={}){let s=[],i=[],l=[],r=0,o=n.length>1?[]:null;return he(()=>V(l)),()=>{let f=e()||[],u,c;return f[ae],B(()=>{let d=f.length,a,y,v,g,x,m,A,$,_;if(d===0)r!==0&&(V(l),l=[],s=[],i=[],r=0,o&&(o=[])),t.fallback&&(s=[be],i[0]=X(fe=>(l[0]=fe,t.fallback())),r=1);else if(r===0){for(i=new Array(d),c=0;c<d;c++)s[c]=f[c],i[c]=X(b);r=d}else{for(v=new Array(d),g=new Array(d),o&&(x=new Array(d)),m=0,A=Math.min(r,d);m<A&&s[m]===f[m];m++);for(A=r-1,$=d-1;A>=m&&$>=m&&s[A]===f[$];A--,$--)v[$]=i[A],g[$]=l[A],o&&(x[$]=o[A]);for(a=new Map,y=new Array($+1),c=$;c>=m;c--)_=f[c],u=a.get(_),y[c]=u===void 0?-1:u,a.set(_,c);for(u=m;u<=A;u++)_=s[u],c=a.get(_),c!==void 0&&c!==-1?(v[c]=i[u],g[c]=l[u],o&&(x[c]=o[u]),c=y[c],a.set(_,c)):l[u]();for(c=m;c<d;c++)c in v?(i[c]=v[c],l[c]=g[c],o&&(o[c]=x[c],o[c](c))):i[c]=X(b);i=i.slice(0,r=d),s=f.slice(0)}return i});function b(d){if(l[c]=d,o){const[a,y]=O(c);return o[c]=y,n(f[c],a)}return n(f[c])}}}function S(e,n){return B(()=>e(n||{}))}function ve(e){const n="fallback"in e&&{fallback:()=>e.fallback};return G(me(()=>e.each,e.children,n||void 0))}function xe(e){let n=!1,t=!1;const s=ge(()=>e.children),i=G(()=>{let l=s();Array.isArray(l)||(l=[l]);for(let r=0;r<l.length;r++){const o=l[r].when;if(o)return t=!!l[r].keyed,[r,o,l[r]]}return[-1]},void 0,{equals:(l,r)=>l[0]===r[0]&&(n?l[1]===r[1]:!l[1]==!r[1])&&l[2]===r[2]});return G(()=>{const[l,r,o]=i();if(l<0)return e.fallback;const f=o.children,u=typeof f=="function"&&f.length>0;return n=t||u,u?B(()=>f(r)):f})}function J(e){return e}function Ae(e,n,t){let s=t.length,i=n.length,l=s,r=0,o=0,f=n[i-1].nextSibling,u=null;for(;r<i||o<l;){if(n[r]===t[o]){r++,o++;continue}for(;n[i-1]===t[l-1];)i--,l--;if(i===r){const c=l<s?o?t[o-1].nextSibling:t[l-o]:f;for(;o<l;)e.insertBefore(t[o++],c)}else if(l===o)for(;r<i;)(!u||!u.has(n[r]))&&n[r].remove(),r++;else if(n[r]===t[l-1]&&t[o]===n[i-1]){const c=n[--i].nextSibling;e.insertBefore(t[o++],n[r++].nextSibling),e.insertBefore(t[--l],c),n[i]=t[l]}else{if(!u){u=new Map;let b=o;for(;b<l;)u.set(t[b],b++)}const c=u.get(n[r]);if(c!=null)if(o<c&&c<l){let b=r,d=1,a;for(;++b<i&&b<l&&!((a=u.get(n[b]))==null||a!==c+d);)d++;if(d>c-o){const y=n[r];for(;o<c;)e.insertBefore(t[o++],y)}else e.replaceChild(t[o++],n[r++])}else r++;else n[r++].remove()}}}const Q="_$DX_DELEGATE";function $e(e,n,t,s={}){let i;return X(l=>{i=l,n===document?e():k(n,e(),n.firstChild?null:void 0,t)},s.owner),()=>{i(),n.textContent=""}}function U(e,n,t){const s=document.createElement("template");s.innerHTML=e;let i=s.content.firstChild;return t&&(i=i.firstChild),i}function K(e,n=window.document){const t=n[Q]||(n[Q]=new Set);for(let s=0,i=e.length;s<i;s++){const l=e[s];t.has(l)||(t.add(l),n.addEventListener(l,Ce))}}function Se(e,n){n==null?e.removeAttribute("class"):e.className=n}function ce(e,n,t,s){if(s)Array.isArray(t)?(e[`$$${n}`]=t[0],e[`$$${n}Data`]=t[1]):e[`$$${n}`]=t;else if(Array.isArray(t)){const i=t[0];e.addEventListener(n,t[0]=l=>i.call(e,t[1],l))}else e.addEventListener(n,t)}function k(e,n,t,s){if(t!==void 0&&!s&&(s=[]),typeof n!="function")return M(e,n,s,t);F(i=>M(e,n(),i,t),s)}function Ce(e){const n=`$$${e.type}`;let t=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==t&&Object.defineProperty(e,"target",{configurable:!0,value:t}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),C.registry&&!C.done&&(C.done=!0,document.querySelectorAll("[id^=pl-]").forEach(s=>s.remove()));t!==null;){const s=t[n];if(s&&!t.disabled){const i=t[`${n}Data`];if(i!==void 0?s.call(t,i,e):s.call(t,e),e.cancelBubble)return}t=t.host&&t.host!==t&&t.host instanceof Node?t.host:t.parentNode}}function M(e,n,t,s,i){for(C.context&&!t&&(t=[...e.childNodes]);typeof t=="function";)t=t();if(n===t)return t;const l=typeof n,r=s!==void 0;if(e=r&&t[0]&&t[0].parentNode||e,l==="string"||l==="number"){if(C.context)return t;if(l==="number"&&(n=n.toString()),r){let o=t[0];o&&o.nodeType===3?o.data=n:o=document.createTextNode(n),t=L(e,t,s,o)}else t!==""&&typeof t=="string"?t=e.firstChild.data=n:t=e.textContent=n}else if(n==null||l==="boolean"){if(C.context)return t;t=L(e,t,s)}else{if(l==="function")return F(()=>{let o=n();for(;typeof o=="function";)o=o();t=M(e,o,t,s)}),()=>t;if(Array.isArray(n)){const o=[],f=t&&Array.isArray(t);if(W(o,n,t,i))return F(()=>t=M(e,o,t,s,!0)),()=>t;if(C.context){if(!o.length)return t;for(let u=0;u<o.length;u++)if(o[u].parentNode)return t=o}if(o.length===0){if(t=L(e,t,s),r)return t}else f?t.length===0?Z(e,o,s):Ae(e,t,o):(t&&L(e),Z(e,o));t=o}else if(n instanceof Node){if(C.context&&n.parentNode)return t=r?[n]:n;if(Array.isArray(t)){if(r)return t=L(e,t,s,n);L(e,t,null,n)}else t==null||t===""||!e.firstChild?e.appendChild(n):e.replaceChild(n,e.firstChild);t=n}}return t}function W(e,n,t,s){let i=!1;for(let l=0,r=n.length;l<r;l++){let o=n[l],f=t&&t[l];if(o instanceof Node)e.push(o);else if(!(o==null||o===!0||o===!1))if(Array.isArray(o))i=W(e,o,f)||i;else if(typeof o=="function")if(s){for(;typeof o=="function";)o=o();i=W(e,Array.isArray(o)?o:[o],Array.isArray(f)?f:[f])||i}else e.push(o),i=!0;else{const u=String(o);f&&f.nodeType===3&&f.data===u?e.push(f):e.push(document.createTextNode(u))}}return i}function Z(e,n,t=null){for(let s=0,i=n.length;s<i;s++)e.insertBefore(n[s],t)}function L(e,n,t,s){if(t===void 0)return e.textContent="";const i=s||document.createTextNode("");if(n.length){let l=!1;for(let r=n.length-1;r>=0;r--){const o=n[r];if(i!==o){const f=o.parentNode===e;!l&&!r?f?e.replaceChild(i,o):e.insertBefore(i,t):f&&o.remove()}else l=!0}}else e.insertBefore(i,t);return[i]}const Ne=U('<div class="w-1/3 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"><div class="modal-box bg-secondary text-secondary-content p-5"><h3 class="font-bold text-2xl"></h3><div class="grid grid-rows-1 grid-cols-2 content-center items-center pt-4"><p class="text-lg"></p><p class="mb-2 -ml-3 text-4xl"></p></div><div class="modal-action"><button class="btn btn-accent border-2 border-accent-focus">Close</button></div></div></div>');function Ee(e){const n=e.winner()==="Tie"?"Tie Game":e.winner()==="X"?"You Win":"You Lose",t=e.winner()==="Tie"?"No one wins":e.winner()==="X"?"You have won.":"You have lost.",s=e.winner()==="Tie"?"\u{1F610}":e.winner()==="X"?"\u{1F60E}":"\u{1F62D}";return(()=>{const i=Ne.cloneNode(!0),l=i.firstChild,r=l.firstChild,o=r.nextSibling,f=o.firstChild,u=f.nextSibling,c=o.nextSibling,b=c.firstChild;return k(r,n),k(f,t),k(u,s),ce(b,"click",e.showNewGame,!0),i})()}K(["click"]);const Te=U('<div class="w-1/3 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"><div class="modal-box bg-secondary text-secondary-content p-5"><h3 class="font-bold text-2xl">New Game</h3><div class="grid grid-rows-1 grid-cols-2 content-center items-center pt-4"><p class="text-lg">Play a game!</p></div><div class="modal-action"><button class="btn btn-accent border-2 border-accent-focus">New Game</button></div></div></div>');function _e(e){return(()=>{const n=Te.cloneNode(!0),t=n.firstChild,s=t.firstChild,i=s.nextSibling,l=i.nextSibling,r=l.firstChild;return ce(r,"click",e.showGame,!0),n})()}K(["click"]);function z(e){return String.fromCharCode(65+e)}const Le=U('<main class="grid place-content-center"><h1 class="text-5xl font-bold text-center pt-4 mb-5">Connect 4</h1><div class="grid place-content-center items-center"><div class="grid grid-cols-7 grid-rows-6" id="game-grid"></div></div></main>'),Oe=U('<div class="bg-base-300 p-1"><div></div></div>');function ke(){const[e,n]=O([]),[t,s]=O({turn:"X",position:Array(42).fill(" ")}),[i,l]=O(),[r,o]=O(!0),[f,u]=O(!1);function c(){l(void 0),s({turn:"X",position:Array(42).fill(" ")}),n([]),o(!r())}async function b(a){if(!d(a))return;u(!0),console.log("player move",z(a));const y=await fetch("/place",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({history:e().join("")})}),{move:v,pwin:g,cwin:x}=await y.json();console.log(`server move ${v}`),console.log(`pwin ${g}`),console.log(`cwin ${x}`),g&&l("X"),x&&l("O"),t().position.every(m=>m!==" ")&&l("Tie"),u(!1),d(v)}function d(a){if(f())return!1;let y=[...t().position],v=!1;for(let g=42;g>=0;g-=7)if(y[g+a]===" "){y[g+a]=t().turn,v=!0;break}return v===!1?!1:(n(g=>[...g,z(a)]),s({turn:t().turn==="X"?"O":"X",position:y}),!0)}return S(xe,{get children(){return[S(J,{get when(){return r()},get children(){return S(_e,{showGame:c})}}),S(J,{get when(){return!r()},get children(){const a=Le.cloneNode(!0),y=a.firstChild,v=y.nextSibling,g=v.firstChild;return k(g,S(ve,{get each(){return t().position},children:(x,m)=>S(Ge,{stone:x,get index(){return m()},place:b})})),k(a,(()=>{const x=G(()=>i()!==void 0);return()=>x()&&S(Ee,{winner:i,showNewGame:c})})(),null),a}})]}})}function Ge(e){const n=e.index%7,t=e.stone==="X"?"bg-primary":e.stone==="O"?"bg-accent":"bg-neutral-focus";return(()=>{const s=Oe.cloneNode(!0),i=s.firstChild;return i.$$click=()=>e.place(n),Se(i,`${t} w-full h-full rounded-full cursor-pointer hover:scale-110 transition-transform duration-200`),s})()}K(["click"]);$e(()=>S(ke,{}),document.getElementById("root"));
